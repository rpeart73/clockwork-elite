import{j as e}from"./ui-vendor-C07CzjY3.js";import{a as t,r as a,g as n,R as s}from"./react-vendor-BG0u1ZPm.js";import{a as r,b as o,s as i,i as l,f as c}from"./date-vendor-Bma10V4J.js";import{p as d}from"./utils-vendor-fTd6nRg8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var u={},m=t;u.createRoot=m.createRoot,u.hydrateRoot=m.hydrateRoot;const h=e=>{let t;const a=new Set,n=(e,n)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,r={setState:n,getState:s,getInitialState:()=>o,subscribe:e=>(a.add(e),()=>a.delete(e)),destroy:()=>{a.clear()}},o=t=e(n,s,r);return r};var p={exports:{}},f={},g={exports:{}},x={},v=a;var y="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},j=v.useState,b=v.useEffect,N=v.useLayoutEffect,w=v.useDebugValue;function D(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!y(e,a)}catch(n){return!0}}var S="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),n=j({inst:{value:a,getSnapshot:t}}),s=n[0].inst,r=n[1];return N(function(){s.value=a,s.getSnapshot=t,D(s)&&r({inst:s})},[e,a,t]),b(function(){return D(s)&&r({inst:s}),e(function(){D(s)&&r({inst:s})})},[e]),w(a),a};x.useSyncExternalStore=void 0!==v.useSyncExternalStore?v.useSyncExternalStore:S,g.exports=x;var C=g.exports,E=a,k=C;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},P=k.useSyncExternalStore,I=E.useRef,L=E.useEffect,M=E.useMemo,O=E.useDebugValue;f.useSyncExternalStoreWithSelector=function(e,t,a,n,s){var r=I(null);if(null===r.current){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=M(function(){function e(e){if(!l){if(l=!0,r=e,e=n(e),void 0!==s&&o.hasValue){var t=o.value;if(s(t,e))return i=t}return i=e}if(t=i,T(r,e))return t;var a=n(e);return void 0!==s&&s(t,a)?(r=e,t):(r=e,i=a)}var r,i,l=!1,c=void 0===a?null:a;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,a,n,s]);var i=P(e,r[0],r[1]);return L(function(){o.hasValue=!0,o.value=i},[i]),O(i),i},p.exports=f;const A=n(p.exports),R={},{useDebugValue:$}=s,{useSyncExternalStoreWithSelector:z}=A;let F=!1;const W=e=>e;const q=e=>{const t="function"==typeof e?(e=>e?h(e):h)(e):e,a=(e,a)=>function(e,t=W,a){"production"!==(R?"production":void 0)&&a&&!F&&(F=!0);const n=z(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return $(n),n}(t,e,a);return Object.assign(a,t),a};function H(e,t){let a;try{a=e()}catch(n){return}return{getItem:e=>{var t;const n=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=a.getItem(e))?t:null;return s instanceof Promise?s.then(n):n(s)},setItem:(e,t)=>a.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>a.removeItem(e)}}const U=e=>t=>{try{const a=e(t);return a instanceof Promise?a:{then:e=>U(e)(a),catch(e){return this}}}catch(a){return{then(e){return this},catch:e=>U(e)(a)}}},_=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(a,n,s)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const i=new Set,l=new Set;let c;try{c=r.getStorage()}catch(g){}if(!c)return e((...e)=>{a(...e)},n,s);const d=U(r.serialize),u=()=>{const e=r.partialize({...n()});let t;const a=d({state:e,version:r.version}).then(e=>c.setItem(r.name,e)).catch(e=>{t=e});if(t)throw t;return a},m=s.setState;s.setState=(e,t)=>{m(e,t),u()};const h=e((...e)=>{a(...e),u()},n,s);let p;const f=()=>{var e;if(!c)return;o=!1,i.forEach(e=>e(n()));const t=(null==(e=r.onRehydrateStorage)?void 0:e.call(r,n()))||void 0;return U(c.getItem.bind(c))(r.name).then(e=>{if(e)return r.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===r.version)return e.state;if(r.migrate)return r.migrate(e.state,e.version)}}).then(e=>{var t;return p=r.merge(e,null!=(t=n())?t:h),a(p,!0),u()}).then(()=>{null==t||t(p,void 0),o=!0,l.forEach(e=>e(p))}).catch(e=>{null==t||t(void 0,e)})};return s.persist={setOptions:e=>{r={...r,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},f(),p||h})(e,t):((e,t)=>(a,n,s)=>{let r={storage:H(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const i=new Set,l=new Set;let c=r.storage;if(!c)return e((...e)=>{a(...e)},n,s);const d=()=>{const e=r.partialize({...n()});return c.setItem(r.name,{state:e,version:r.version})},u=s.setState;s.setState=(e,t)=>{u(e,t),d()};const m=e((...e)=>{a(...e),d()},n,s);let h;s.getInitialState=()=>m;const p=()=>{var e,t;if(!c)return;o=!1,i.forEach(e=>{var t;return e(null!=(t=n())?t:m)});const s=(null==(t=r.onRehydrateStorage)?void 0:t.call(r,null!=(e=n())?e:m))||void 0;return U(c.getItem.bind(c))(r.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===r.version)return[!1,e.state];if(r.migrate)return[!0,r.migrate(e.state,e.version)]}return[!1,void 0]}).then(e=>{var t;const[s,o]=e;if(h=r.merge(o,null!=(t=n())?t:m),a(h,!0),s)return d()}).then(()=>{null==s||s(h,void 0),h=n(),o=!0,l.forEach(e=>e(h))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{r={...r,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},r.skipHydration||p(),h||m})(e,t);class G{static HEADER_PATTERNS=[/(?:Sent|Date):\s*(\w+,\s+\w+\s+\d{1,2},\s+\d{4})/gi,/(?:Sent|Date):\s*(\w+\s+\d{1,2},\s+\d{4})/gi,/(?:Sent|Date):\s*(\w+,\s+\d{1,2}[/-]\d{1,2}[/-]\d{4})/gi,/(?:Sent|Date):\s*(\w+,\s+\w+\s+\d{1,2},\s+\d{4}\s+\d{1,2}:\d{2})/gi,/(?:On|From).*?(?:Sent|Date):\s*(\w+,\s+\w+\s+\d{1,2},\s+\d{4})/gi];static extractDates(e){const t=[],a=new Set,n=e.match(/\[Last date in response:\s*([^\]]+)\]/i);if(n){const e=n[1]?.trim()||"",a=this.parseDate(e);a&&t.push({date:a,formatted:this.formatDate(a),context:`Last response: ${e}`,isLastDate:!0})}return this.HEADER_PATTERNS.forEach(n=>{const s=e.matchAll(n);for(const e of s){const n=e[1]||"",s=this.parseDate(n);if(s){const e=this.formatDate(s);a.has(e)||(a.add(e),t.push({date:s,formatted:e,context:`Email header: ${n}`}))}}}),t}static parseDate(e){const t=new Date,a=t.getFullYear(),n=t.getMonth(),s=e.toLowerCase().trim();if("today"===s)return t;if("yesterday"===s)return r(t,-1);if("tomorrow"===s)return r(t,1);const c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d=c.indexOf(s);if(d>=0){let e=d-t.getDay();return e<=0&&(e+=7),r(t,e)}const u=e.match(/^(next|last)\s+(\w+day)$/i);if(u&&u[1]&&u[2]){const e=u[2].toLowerCase(),a=c.indexOf(e);if(a>=0){const e=t.getDay();if("next"===u[1].toLowerCase()){return r(t,(a-e+7)%7||7)}return r(t,-((e-a+7)%7||7))}}const m=e.match(/^(?:the\s+)?(\d{1,2})(?:st|nd|rd|th)?$/i);if(m){const e=parseInt(m[1]||"0");if(e>=1&&e<=31){let s=new Date(a,n,e);return s<t&&(s=o(s,1)),i(s)}}const h=e.match(/^(\w+)\s+(\d{1,2})(?:st|nd|rd|th)?$/i);if(h){const e=h[1]||"",n=parseInt(h[2]||"0"),s=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];let r=["january","february","march","april","may","june","july","august","september","october","november","december"].indexOf(e.toLowerCase());if(-1===r&&(r=s.indexOf(e.toLowerCase().substring(0,3))),r>=0&&n>=1&&n<=31){let e=new Date(a,r,n);return e<t&&(e=new Date(a+1,r,n)),i(e)}}const p=e.match(/^(\d{1,2})[/-](\d{1,2})$/);if(p){const e=parseInt(p[1]||"1")-1,n=parseInt(p[2]||"1");if(e>=0&&e<=11&&n>=1&&n<=31){let s=new Date(a,e,n);return s<t&&(s=new Date(a+1,e,n)),i(s)}}if(e.match(/end\s+of\s+(?:the\s+)?week/i)){const e=t.getDay();return r(t,(5-e+7)%7||7)}if(e.match(/end\s+of\s+(?:the\s+)?month/i))return new Date(a,n+1,0);if(e.match(/beginning\s+of\s+(?:next\s+)?week/i)){const e=t.getDay();return r(t,(8-e)%7||7)}if(e.match(/beginning\s+of\s+(?:next\s+)?month/i))return new Date(a,n+1,1);try{const t=new Date(e);if(l(t))return i(t)}catch(f){}return null}static formatDate(e){return c(e,"MMMM d, yyyy")}static hasLastDateMarker(e){return e.includes("[Last date in response:")}}class V{static consolidate(e,t,a){if(!a)return[{id:Date.now().toString(),date:new Date,dateStr:"Waiting for last date...",type:"pending",context:"Please wait for the last date prompt",content:t,selected:!1}];const n=e.map((e,a)=>({id:`${Date.now()}-${a}`,date:e.date,dateStr:e.formatted,type:"email",context:e.context,content:t,selected:!0,isLastDate:e.isLastDate||!1})),s=new Map;n.forEach(e=>{const t=e.dateStr;if(s.has(t)){const a=s.get(t);a.exchanges=(a.exchanges||1)+1,a.combinedContext=[...a.combinedContext||[],e.context],"email"!==e.type&&"email"===a.type&&(a.type=e.type)}else s.set(t,{...e,exchanges:1,combinedContext:[e.context]})});const r=Array.from(s.values()).map(e=>({...e,context:e.exchanges&&e.exchanges>1?`${e.exchanges} exchanges on this day: ${e.combinedContext?.join("; ")}`:e.context}));return r.sort((e,t)=>e.date.getTime()-t.date.getTime()),r}static formatPOC(e){if("pending"===e.type)return e.dateStr;return`${e.exchanges&&e.exchanges>1?`${e.type} (${e.exchanges} exchanges)`:e.type} - ${e.dateStr}`}static getTotalExchanges(e){return e.reduce((e,t)=>e+(t.exchanges||1),0)}}class B{static EMAIL_PATTERN=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;static DANGEROUS_PATTERNS=[/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,/javascript:/gi,/on\w+\s*=/gi,/<iframe/gi,/<object/gi,/<embed/gi];static sanitizeEmailContent(e){if(!e||"string"!=typeof e)return"";let t=e;return this.DANGEROUS_PATTERNS.forEach(e=>{t=t.replace(e,"")}),t=this.escapeHtml(t),t.trim()}static sanitizeText(e){if(!e||"string"!=typeof e)return"";return d.sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[],KEEP_CONTENT:!0}).trim()}static sanitizeEmail(e){const t=this.sanitizeText(e);if(!this.EMAIL_PATTERN.test(t))throw new Error("Invalid email format");return t.toLowerCase()}static sanitizeDate(e){return e.replace(/[<>\"'&]/g,"").trim()}static escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}static sanitizeStudentName(e){const t=this.sanitizeText(e);if(t.length<1||t.length>100)throw new Error("Invalid name length");return t.replace(/[^a-zA-Z\s\-']/g,"").trim()}static sanitizeNumber(e,t,a){const n="string"==typeof e?parseFloat(e):e;if(isNaN(n))throw new Error("Invalid number");if(void 0!==t&&n<t)throw new Error(`Number must be at least ${t}`);if(void 0!==a&&n>a)throw new Error(`Number must be at most ${a}`);return n}static detectContentType(e){const t=this.sanitizeText(e);if(/@|from:|to:|subject:|sent:|date:/i.test(t))return"email";return/task|project|deliverable|milestone|complete|implement/i.test(t)?"task":"unknown"}}const J={universalInput:"",contentType:"auto-detect",currentMode:"auto-detect",detectedPOCs:[],hasLastDate:!1,studentName:"",serviceType:"Email Support",noteStyle:"natural",detailLevel:"standard",language:"canadian",startDate:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],totalDaysWorked:0,distributionPattern:"equal",timeOfDay:"early_morning",hoursPerDay:5,workflow:{state:"idle",progress:0,message:"Ready for input"},noteContext:null,lastSavedDraft:"",draftTimestamp:null},K=q(_((e,t)=>({...J,setUniversalInput:a=>{const n=B.sanitizeEmailContent(a);e({universalInput:n,draftTimestamp:(new Date).toISOString()}),n.trim()&&t().analyzeContent()},setCurrentMode:t=>e({currentMode:t}),analyzeContent:()=>{const{universalInput:a,currentMode:n}=t();e({workflow:{state:"analyzing",progress:30,message:"Analyzing content..."}});let s=n;if("auto-detect"===n){const e=B.detectContentType(a);s="unknown"===e?"task":e}if("email"===s){const t=G.extractDates(a),n=G.hasLastDateMarker(a),s=V.consolidate(t,a,n),r=a.match(/From:\s*([^<\n]+)/i),o=r&&r[1]?B.sanitizeStudentName(r[1].trim().split(" ")[0]):"";e({contentType:"email",detectedPOCs:s,hasLastDate:n,studentName:o,workflow:{state:"ready",progress:60,message:"Ready to generate"}})}else e({contentType:"task",workflow:{state:"ready",progress:60,message:"Ready to generate"}})},setStudentName:t=>{const a=B.sanitizeStudentName(t);e({studentName:a})},setNoteContext:t=>e({noteContext:t}),generateEntries:async()=>{const a=t();e({workflow:{state:"generating",progress:80,message:"Generating entries..."}});let n="";return n="email"===a.contentType?function(e){const{detectedPOCs:t,studentName:a,serviceType:n,noteStyle:s,noteContext:r,universalInput:o}=e;let i="";t.length>1&&(i+=`// ${t.length} Points of Contact Detected\n`,i+=`// Student: ${a}\n`,i+=`// Service: ${n}\n`,i+="=".repeat(80)+"\n\n");t.forEach((e,o)=>{if("pending"===e.type)return;const l="1 hour";i+=`${e.dateStr} | ${n} | ${l} | Academic Support | ${a}\n\n`,"natural"===s&&(i+="OBJECTIVE:\n",i+=r?.topics?`${a} contacted regarding ${r.topics}.`:`${a} reached out for assistance.`,r?.questions&&(i+=` Student inquired about ${r.questions}.`),i+="\n\n",i+="WHAT TRANSPIRED:\n",i+=r?.actions?r.actions:`Reviewed the ${e.type} and provided appropriate response.`,r?.additional&&(i+=` ${r.additional}`),i+="\n\n",i+="OUTCOME/PLAN:\n",i+=r?.followUp?r.followUp:"Response provided. Will monitor for any follow-up questions.",i+="\n"),o<t.length-1&&(i+="\n"+"=".repeat(80)+"\n\n")}),o&&t.length>0&&(i+="\n\n"+"-".repeat(80)+"\n",i+="ORIGINAL EMAIL:\n\n",i+=o.trim(),i+="\n"+"-".repeat(80));return i}(a):function(e){const{startDate:t,endDate:a,totalDaysWorked:n,distributionPattern:s,timeOfDay:r,hoursPerDay:o,universalInput:i,detailLevel:l}=e,d=new Date(t),u=new Date(a);let m="",h=new Date(d),p=0;const f=function(e){const t={title:"Project Development",category:"Development",activities:["Analyzed requirements and specifications","Implemented features according to design","Conducted code review and testing","Updated documentation"]};if(!e)return t;const a=e.match(/project[:\s]+([^\n]+)/i);a&&a[1]&&(t.title=a[1].trim());const n=[];["developed","created","implemented","designed","analyzed","reviewed"].forEach(t=>{const a=new RegExp(`${t}\\s+([^.]+)`,"gi"),s=e.matchAll(a);for(const e of s)n.push(e[0])}),n.length>0&&(t.activities=n);return t}(i);for(;p<n&&h<=u;){if(0!==h.getDay()&&6!==h.getDay()){const e=c(h,"MMMM d, yyyy"),t=Q(p,n,o,s),a=Y(r,t);m+=`${e} | ${a} | ${t} hours | ${f.title} | ${f.category}\n`;Z(f,"basic"===l?3:"enhanced"===l?7:5).forEach(e=>{m+=`• ${e}\n`}),m+="\n",p++}h.setDate(h.getDate()+1)}return m.trim()}(a),e({workflow:{state:"complete",progress:100,message:"Generation complete"}}),n},clearAll:()=>e(J),restoreDraft:t=>e({...t}),updateWorkflow:t=>e(e=>({workflow:{...e.workflow,...t}}))}),{name:"clockwork-elite-storage",storage:H(()=>localStorage),partialize:e=>({universalInput:e.universalInput,studentName:e.studentName,noteStyle:e.noteStyle,detailLevel:e.detailLevel,language:e.language,startDate:e.startDate,endDate:e.endDate,totalDaysWorked:e.totalDaysWorked,draftTimestamp:e.draftTimestamp})}));function Q(e,t,a,n){switch(n){case"frontLoaded":return e<t/2?a+1:a-1;case"backLoaded":return e>=t/2?a+1:a-1;case"ascending":return Math.min(a+.5*e,8);case"descending":return Math.max(a-.5*e,1);default:return a}}function Y(e,t){const a={early_morning:{start:6,name:"6:00 AM"},morning:{start:8,name:"8:00 AM"},midday:{start:11,name:"11:00 AM"},afternoon:{start:13,name:"1:00 PM"},late_afternoon:{start:16,name:"4:00 PM"},evening:{start:18,name:"6:00 PM"}},n=a[e]||a.morning,s=n.start+t,r=s>12?s-12+":00 PM":`${s}:00 AM`;return`${n.name} - ${r}`}function Z(e,t){const a=[],n=[...e.activities];for(let r=0;r<Math.min(t,n.length);r++)a.push(n[r]);const s=["Coordinated with team members on deliverables","Ensured quality standards were met","Documented progress and outcomes","Prepared for upcoming milestones"];for(;a.length<t;)a.push(s[a.length%s.length]);return a.slice(0,t)}function X(){return e.jsxs("header",{className:"header",children:[e.jsx("h1",{children:"Clockwork Elite"}),e.jsx("p",{className:"subtitle",children:"Enterprise Task & Case Note Management System"})]})}function ee(){const{universalInput:t,currentMode:n,workflow:s,setUniversalInput:r,setCurrentMode:o,clearAll:i}=K(),l=a.useCallback(function(e,t){let a=null;return function(...n){a&&clearTimeout(a),a=setTimeout(()=>{e(...n),a=null},t)}}(e=>{r(e)},300),[r]);return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{children:"Input"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn "+("auto-detect"===n?"btn-primary":""),onClick:()=>o("auto-detect"),children:"Auto-Detect"}),e.jsx("button",{className:"btn "+("email"===n?"btn-primary":""),onClick:()=>o("email"),children:"Email Mode"}),e.jsx("button",{className:"btn "+("task"===n?"btn-primary":""),onClick:()=>o("task"),children:"Task Mode"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"universal-input",children:"email"===n?"Paste Email Thread":"task"===n?"Enter Task Description":"Paste Content or Describe Tasks"}),e.jsx("textarea",{id:"universal-input",className:"textarea",placeholder:"email"===n?"Paste the entire email thread here...":"task"===n?"Describe the tasks you need to complete...":"Paste email thread or describe tasks...",defaultValue:t,onChange:e=>l(e.target.value),rows:12}),e.jsx("p",{className:"form-help",children:"email"===n?"Include all emails in the thread. The system will extract dates and POCs automatically.":"task"===n?"Describe what needs to be done. The system will distribute tasks across business days.":"The system will automatically detect whether this is an email thread or task description."})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-small",children:"idle"!==s.state&&e.jsx("span",{children:s.message})}),e.jsx("button",{className:"btn",onClick:i,disabled:!t,children:"Clear All"})]})]})}function te(){const{detectedPOCs:t,hasLastDate:a}=K();if(!a)return e.jsxs("div",{className:"poc-display",children:[e.jsx("h3",{className:"text-small mb-2",children:"Points of Contact"}),e.jsx("div",{className:"status",children:"Waiting for last date... Please add: [Last date in response: DATE]"})]});const n=V.getTotalExchanges(t);return e.jsxs("div",{className:"poc-display",children:[e.jsxs("h3",{className:"text-small mb-2",children:["Points of Contact (",t.length," days, ",n," exchanges)"]}),e.jsx("div",{className:"poc-list",children:t.map(t=>e.jsxs("div",{className:"poc-item",children:[e.jsx("input",{type:"checkbox",id:`poc-${t.id}`,checked:t.selected,onChange:()=>{const e=K.getState(),a=e.detectedPOCs.map(e=>e.id===t.id?{...e,selected:!e.selected}:e);e.restoreDraft({detectedPOCs:a})}}),e.jsxs("label",{htmlFor:`poc-${t.id}`,children:[V.formatPOC(t),t.isLastDate&&" (Last Response)"]})]},t.id))})]})}function ae(){const t=K(),{contentType:a,studentName:n,serviceType:s,noteStyle:r,detailLevel:o,language:i,startDate:l,endDate:c,totalDaysWorked:d,distributionPattern:u,timeOfDay:m,hoursPerDay:h}=t;return"email"===a?e.jsxs("div",{className:"form-fields",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"student-name",children:"Student Name"}),e.jsx("input",{id:"student-name",type:"text",className:"input",value:n,onChange:e=>t.setStudentName(e.target.value),placeholder:"Enter student's first name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"service-type",children:"Service Type"}),e.jsxs("select",{id:"service-type",className:"select",value:s,onChange:e=>t.restoreDraft({serviceType:e.target.value}),children:[e.jsx("option",{value:"Email Support",children:"Email Support"}),e.jsx("option",{value:"Virtual Meeting",children:"Virtual Meeting"}),e.jsx("option",{value:"Phone Support",children:"Phone Support"}),e.jsx("option",{value:"In-Person Meeting",children:"In-Person Meeting"}),e.jsx("option",{value:"Document Review",children:"Document Review"}),e.jsx("option",{value:"Research Consultation",children:"Research Consultation"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"note-style",children:"Note Style"}),e.jsxs("select",{id:"note-style",className:"select",value:r,onChange:e=>t.restoreDraft({noteStyle:e.target.value}),children:[e.jsx("option",{value:"natural",children:"Natural Language"}),e.jsx("option",{value:"bullets",children:"Bullet Points"}),e.jsx("option",{value:"concise",children:"Concise"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"detail-level",children:"Detail Level"}),e.jsxs("select",{id:"detail-level",className:"select",value:o,onChange:e=>t.restoreDraft({detailLevel:e.target.value}),children:[e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"enhanced",children:"Enhanced"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"language",children:"Language Variant"}),e.jsxs("select",{id:"language",className:"select",value:i,onChange:e=>t.restoreDraft({language:e.target.value}),children:[e.jsx("option",{value:"canadian",children:"Canadian English"}),e.jsx("option",{value:"british",children:"British English"})]})]})]}):e.jsxs("div",{className:"form-fields",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"start-date",children:"Start Date"}),e.jsx("input",{id:"start-date",type:"date",className:"input",value:l,onChange:e=>t.restoreDraft({startDate:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"end-date",children:"End Date"}),e.jsx("input",{id:"end-date",type:"date",className:"input",value:c,onChange:e=>t.restoreDraft({endDate:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"days-worked",children:"Total Days to Work"}),e.jsx("input",{id:"days-worked",type:"number",className:"input",value:d,onChange:e=>t.restoreDraft({totalDaysWorked:parseInt(e.target.value)||0}),min:"1",max:"30"}),e.jsxs("p",{className:"form-help",children:["Business days available: ",ne(l,c)]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"distribution",children:"Distribution Pattern"}),e.jsxs("select",{id:"distribution",className:"select",value:u,onChange:e=>t.restoreDraft({distributionPattern:e.target.value}),children:[e.jsx("option",{value:"equal",children:"Equal Distribution"}),e.jsx("option",{value:"frontLoaded",children:"Front-Loaded"}),e.jsx("option",{value:"backLoaded",children:"Back-Loaded"}),e.jsx("option",{value:"ascending",children:"Ascending Hours"}),e.jsx("option",{value:"descending",children:"Descending Hours"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"time-of-day",children:"Time of Day"}),e.jsxs("select",{id:"time-of-day",className:"select",value:m,onChange:e=>t.restoreDraft({timeOfDay:e.target.value}),children:[e.jsx("option",{value:"early_morning",children:"Early Morning (6-8 AM)"}),e.jsx("option",{value:"morning",children:"Morning (8-11 AM)"}),e.jsx("option",{value:"midday",children:"Midday (11 AM-1 PM)"}),e.jsx("option",{value:"afternoon",children:"Afternoon (1-4 PM)"}),e.jsx("option",{value:"late_afternoon",children:"Late Afternoon (4-6 PM)"}),e.jsx("option",{value:"evening",children:"Evening (6-8 PM)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"hours-per-day",children:"Hours Per Day"}),e.jsx("input",{id:"hours-per-day",type:"number",className:"input",value:h,onChange:e=>t.restoreDraft({hoursPerDay:parseFloat(e.target.value)||5}),min:"0.5",max:"8",step:"0.5"})]})]})}function ne(e,t){const a=new Date(e),n=new Date(t);let s=0;const r=new Date(a);for(;r<=n;){const e=r.getDay();0!==e&&6!==e&&s++,r.setDate(r.getDate()+1)}return s}function se({onGenerate:t}){const{contentType:a,workflow:n,detectedPOCs:s,studentName:r,startDate:o,endDate:i}=K(),l="ready"===n.state&&("email"===a?s.length>0&&r:o&&i);return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{children:"Analysis & Configuration"}),e.jsxs("div",{className:"text-small",children:["Detected: ",e.jsx("strong",{children:"email"===a?"Email Thread":"Task Description"})]})]}),"email"===a&&e.jsx(te,{}),e.jsx(ae,{}),e.jsx("div",{className:"flex justify-end gap-2 mt-4",children:e.jsx("button",{className:"btn btn-primary",onClick:t,disabled:!l,children:"generating"===n.state?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading mr-2"}),"Generating..."]}):"Generate Entries"})}),"ready"===n.state&&!l&&e.jsx("p",{className:"form-help text-center mt-2",children:"email"===a?"Please ensure student name is filled and POCs are detected":"Please select date range for task distribution"})]})}function re({output:t,onClose:n}){const[s,r]=a.useState(!1),[o,i]=a.useState(!1);return e.jsx("div",{className:"modal-backdrop",onClick:n,children:e.jsxs("div",{className:"modal",style:{maxWidth:"800px"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Generated Entries"}),e.jsx("button",{className:"btn",onClick:n,children:"×"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"output-preview",children:e.jsx("pre",{className:"text-mono text-small",children:t})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn",onClick:async()=>{try{await navigator.clipboard.writeText(t),r(!0),setTimeout(()=>r(!1),2e3)}catch(e){}},children:s?"Copied!":"Copy to Clipboard"}),e.jsx("button",{className:"btn",onClick:()=>{const e=new Blob([t],{type:"text/plain"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=`clockwork-elite-${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),i(!0),setTimeout(()=>i(!1),2e3)},children:o?"Saved!":"Save as File"})]}),e.jsx("button",{className:"btn btn-primary",onClick:n,children:"Done"})]})]})})}function oe({onSubmit:t,onClose:n}){const[s,r]=a.useState({topics:"",questions:"",actions:"",followUp:"",additional:""});return e.jsx("div",{className:"modal-backdrop",onClick:n,children:e.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Add Context for Case Notes"}),e.jsx("button",{className:"btn",onClick:n,children:"×"})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),t(s)},children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"topics",children:"Main Topics Discussed"}),e.jsx("input",{id:"topics",type:"text",className:"input",value:s.topics,onChange:e=>r({...s,topics:e.target.value}),placeholder:"e.g., assignment requirements, research methods"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"questions",children:"Student Questions"}),e.jsx("input",{id:"questions",type:"text",className:"input",value:s.questions,onChange:e=>r({...s,questions:e.target.value}),placeholder:"e.g., formatting guidelines, citation style"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"actions",children:"Actions Taken"}),e.jsx("textarea",{id:"actions",className:"textarea",value:s.actions,onChange:e=>r({...s,actions:e.target.value}),placeholder:"e.g., Reviewed draft, provided feedback on structure",rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"follow-up",children:"Follow-up Plan"}),e.jsx("input",{id:"follow-up",type:"text",className:"input",value:s.followUp,onChange:e=>r({...s,followUp:e.target.value}),placeholder:"e.g., Student will revise and resubmit"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"additional",children:"Additional Notes"}),e.jsx("textarea",{id:"additional",className:"textarea",value:s.additional,onChange:e=>r({...s,additional:e.target.value}),placeholder:"Any other relevant information",rows:2})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn",onClick:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Generate Notes"})]})]})]})})}class ie extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null,retryCount:0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null,retryCount:this.state.retryCount+1})};render(){return this.state.hasError?e.jsx("div",{className:"error-boundary",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{children:"Application Error"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"mb-3",children:"An unexpected error occurred. The application has been stopped to prevent data loss."}),this.state.error&&e.jsxs("details",{className:"mb-3",children:[e.jsx("summary",{className:"cursor-pointer",children:"Technical Details"}),e.jsxs("pre",{className:"text-mono text-small mt-2",children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-primary",onClick:this.handleReset,children:"Try Again"}),e.jsx("button",{className:"btn",onClick:()=>window.location.reload(),children:"Reload Page"})]}),this.state.retryCount>2&&e.jsx("p",{className:"text-small mt-3",children:"Multiple errors detected. Please refresh the page or contact support."})]})]})}):this.props.children}}function le(){const t=K(e=>e.workflow),[n,r]=s.useState(!1),[o,i]=s.useState(!1),[l,c]=s.useState("");a.useEffect(()=>{const e=setInterval(()=>{K.getState().universalInput},3e4);return()=>clearInterval(e)},[]);return e.jsx(ie,{children:e.jsxs("div",{className:"app",children:[e.jsx(X,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"main-grid",children:[e.jsx(ee,{}),"idle"!==t.state&&e.jsx(se,{onGenerate:async()=>{const e=K.getState();if("email"===e.contentType&&!e.noteContext)return void i(!0);const t=await e.generateEntries();c(t),r(!0)}})]})}),n&&e.jsx(re,{output:l,onClose:()=>r(!1)}),o&&e.jsx(oe,{onSubmit:async e=>{const t=K.getState();t.setNoteContext(e),i(!1);const a=await t.generateEntries();c(a),r(!0)},onClose:()=>i(!1)})]})})}window.addEventListener("unhandledrejection",e=>{}),window.addEventListener("error",e=>{});const ce=document.getElementById("root");if(!ce)throw new Error("Root element not found");u.createRoot(ce).render(e.jsx(s.StrictMode,{children:e.jsx(le,{})}));
//# sourceMappingURL=index-CDRMdQO-.js.map
